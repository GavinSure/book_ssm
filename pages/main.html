<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>主页面</title>

		<!-- Google Font: Source Sans Pro -->
		<link rel="stylesheet"
			href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback">
		<!-- Font Awesome -->
		<link rel="stylesheet" href="../plugins/fontawesome-free/css/all.min.css">
		<!-- Theme style -->
		<link rel="stylesheet" href="../css/adminlte.min.css">
		<!-- overlayScrollbars -->
		<link rel="stylesheet" href="../plugins/overlayScrollbars/css/OverlayScrollbars.min.css">
	</head>
	<body class="hold-transition sidebar-mini layout-fixed" data-panel-auto-height-mode="height">
		<div class="wrapper">
			<nav class="main-header navbar navbar-expand navbar-white navbar-light">
				<!-- Left navbar links -->
				<ul class="navbar-nav">
					<li class="nav-item">
						<a class="nav-link" data-widget="pushmenu" href="#" role="button"><i
								class="fas fa-bars"></i></a>
					</li>
				</ul>

				<!-- Right navbar links -->
				<ul class="navbar-nav ml-auto">
					<!-- Navbar Search -->
					<li class="nav-item">
						<a class="nav-link" data-widget="navbar-search" href="#" role="button">
							<i class="fas fa-search"></i>
						</a>
						<div class="navbar-search-block">
							<form class="form-inline">
								<div class="input-group input-group-sm">
									<input class="form-control form-control-navbar" type="search" placeholder="Search"
										aria-label="Search">
									<div class="input-group-append">
										<button class="btn btn-navbar" type="submit">
											<i class="fas fa-search"></i>
										</button>
										<button class="btn btn-navbar" type="button" data-widget="navbar-search">
											<i class="fas fa-times"></i>
										</button>
									</div>
								</div>
							</form>
						</div>
					</li>

					<!-- Notifications Dropdown Menu -->
					<li class="nav-item dropdown">
						<a class="nav-link" data-toggle="dropdown" href="#">
							<i class="far fa-bell"></i>
							<span class="badge badge-warning navbar-badge">15</span>
						</a>
						<div class="dropdown-menu dropdown-menu-lg dropdown-menu-right">
							<span class="dropdown-item dropdown-header">15 Notifications</span>
							<div class="dropdown-divider"></div>
							<a href="#" class="dropdown-item">
								<i class="fas fa-envelope mr-2"></i> 4 new messages
								<span class="float-right text-muted text-sm">3 mins</span>
							</a>
							<div class="dropdown-divider"></div>
							<a href="#" class="dropdown-item">
								<i class="fas fa-users mr-2"></i> 8 friend requests
								<span class="float-right text-muted text-sm">12 hours</span>
							</a>
							<div class="dropdown-divider"></div>
							<a href="#" class="dropdown-item">
								<i class="fas fa-file mr-2"></i> 3 new reports
								<span class="float-right text-muted text-sm">2 days</span>
							</a>
							<div class="dropdown-divider"></div>
							<a href="#" class="dropdown-item dropdown-footer">See All Notifications</a>
						</div>
					</li>
					<li class="nav-item">
						<a class="nav-link" data-widget="fullscreen" href="#" role="button">
							<i class="fas fa-expand-arrows-alt"></i>
						</a>
					</li>
				</ul>
			</nav>
			<!-- /.navbar -->

			<!-- Main Sidebar Container -->
			<aside class="main-sidebar sidebar-dark-primary elevation-4">
				<!-- Brand Logo -->
				<a href="javascript:void(0)" class="brand-link">
					<span class="brand-text font-weight-light">虾球写系统</span>
				</a>

				<!-- Sidebar -->
				<div class="sidebar">
					<!-- Sidebar user panel (optional) -->
					<div class="user-panel mt-3 pb-3 mb-3 d-flex">
						<div class="image">
							<img src="" id="adminImage" title="User Image" class="img-circle elevation-2"
								alt="User Image">
						</div>
						<div class="info">
							<a href="javascript:void(0)" class="d-block" id="adminName">用户名称</a>
						</div>
					</div>

					<!-- Sidebar Menu -->
					<nav class="mt-2">
						<ul class="nav nav-pills nav-sidebar flex-column" data-widget="treeview" role="menu"
							data-accordion="false">
							<li class="nav-item">
								<a href="book.html" class="nav-link">
									<i class="nav-icon far fa-image"></i>
									<p>
										图书管理
									</p>
								</a>
							</li>

							<li class="nav-item">
								<a href="#" class="nav-link">
									<i class="nav-icon far fa-image"></i>
									<p>
										类别管理
									</p>
								</a>
							</li>
						</ul>

					</nav>
				</div>
				<!-- /.sidebar -->
			</aside>

			<!-- Content Wrapper. Contains page content -->
			<div class="content-wrapper iframe-mode" data-widget="iframe" data-loading-screen="750">
				<div class="nav navbar navbar-expand navbar-white navbar-light border-bottom p-0">
					<div class="nav-item dropdown">
						<a class="nav-link bg-danger dropdown-toggle" data-toggle="dropdown" href="#" role="button"
							aria-haspopup="true" aria-expanded="false">关闭标签</a>
						<div class="dropdown-menu mt-0">
							<a class="dropdown-item" href="#" data-widget="iframe-close" data-type="all">关闭所有</a>
							<a class="dropdown-item" href="#" data-widget="iframe-close"
								data-type="all-other">关闭其它标签</a>
						</div>
					</div>
					<a class="nav-link bg-light" href="#" data-widget="iframe-scrollleft"><i
							class="fas fa-angle-double-left"></i></a>
					<ul class="navbar-nav overflow-hidden" role="tablist"></ul>
					<a class="nav-link bg-light" href="#" data-widget="iframe-scrollright"><i
							class="fas fa-angle-double-right"></i></a>
					<a class="nav-link bg-light" href="#" data-widget="iframe-fullscreen"><i
							class="fas fa-expand"></i></a>
				</div>
				<div class="tab-content">
					<div class="tab-empty">
						<h2 class="display-4">No tab selected!</h2>
					</div>
					<div class="tab-loading">
						<div>
							<h2 class="display-4">Tab is loading <i class="fa fa-sync fa-spin"></i></h2>
						</div>
					</div>
				</div>
			</div>
		</div>
		<!-- ./wrapper -->

		<!-- jQuery -->
		<script src="../plugins/jquery/jquery.min.js"></script>
		<!-- jQuery UI 1.11.4 -->
		<script src="../plugins/jquery-ui/jquery-ui.min.js"></script>
		<!-- Resolve conflict in jQuery UI tooltip with Bootstrap tooltip -->
		<script>
			$.widget.bridge('uibutton', $.ui.button)
		</script>
		<!-- Bootstrap 4 -->
		<script src="../plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
		<!-- overlayScrollbars -->
		<script src="../plugins/overlayScrollbars/js/jquery.overlayScrollbars.min.js"></script>
		<!-- AdminLTE App -->
		<script src="../js/adminlte.js"></script>
		<!-- AdminLTE for demo purposes -->
		<script src="../js/demo.js"></script>
		<script>
			//发送请求之前，都要将token的数据放入请求头中  应该是一个全局函数
			$.ajaxSetup({
				global:true,
				beforeSend:function (xhr) {
					//获得token的数据
					let token=localStorage.getItem("token");
					if (!token){
						location.replace("../login.html")
					}else {
						xhr.setRequestHeader("Authorization", "Basic " + token);
					}
				}
			})

		</script>
		<script>
			let url=new URL(location.href)
			console.log(url.search)
			let params=new URLSearchParams(url.search.slice(1));
			console.log(location.href)
			let email=params.get("email");
			$.get(`http://127.0.0.1:8080/admin/findAdminByEmail`,{"email":email},response=>{
				let {
					status,
					msg,
					data
				}=response;
				console.log(response);
				let {
					adminId,
					adminName,
					adminAvatar,
					adminEmail,
				}=data;
				$("#adminImage").attr("src", `http://localhost:8848/book_page/img/${adminAvatar}`);
				$("#adminName").text(adminName);
			})

			// $(function () {
			//     //展示用户信息，缓存
			//     let adminInfo = window.localStorage.getItem("admin");
			//     if (adminInfo != null) {
			//         let admin = JSON.parse(adminInfo);
			//         $("#adminImage").attr("src", "http://127.0.0.1:8080/img/" + admin.adminAvatar);
			//         $("#adminName").text(admin.adminName);
			//     }
			// });
		</script>
	</body>
</html>
